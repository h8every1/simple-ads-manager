var sam=sam||{};!function(i){var e,t=samEditorOptions.media,c=(samEditorOptions.strings,samEditorOptions.action);sam.media=e={buttonId:"#banner-media",adUrl:"#ad_img",adImgId:"#ad_img_id",adName:"#title",adDesc:"#item_description",adAlt:"#ad_alt",adTarget:"#ad_target",fbBtnId:"#fallback-code",adFallback:"#ad_swf_fallback",init:function(){i(this.buttonId).on("click",this.openMediaDialog),i(this.fbBtnId).on("click",this.openMediaDialog)},openMediaDialog:function(i){i.preventDefault();var c="#"+i.currentTarget.id;return this._frame?void this._frame.open():(this._frame=e.frame=wp.media({title:t.title,button:{text:t.button},multiple:!1,library:{type:"image, *flash*"}}),this._frame.on("ready",function(){}),this._frame.state("library").on("select",function(){var i=this.get("selection").single();e.handleMediaAttachment(i,c)}),void this._frame.open())},handleMediaAttachment:function(e,t){var c=e.toJSON();if(t==this.buttonId)i(this.adUrl).val(c.url),i(this.adImgId).val(c.id),""==i(this.adName).val()&&""!=c.title&&i(this.adName).val(c.title),""==i(this.adDesc).val()&&""!=c.caption&&i(this.adDesc).val(c.caption),""==i(this.adAlt).val()&&""!=c.alt&&i(this.adAlt).val(c.alt);else if(t==this.fbBtnId){var d=i(this.adTarget).val(),r=""!=d?'<a href="'+d+'">':"",a='<img src="'+c.url+'">',s=""!=d?"</a>":"",n=r+a+s;i(this.adFallback).val(n)}}},i(document).ready(function(){function t(e,t,c,d,r,a,s){var n=c.val();t.w2grid({name:e,show:{selectColumn:!0,toolbar:!0,footer:!0},multiSearch:!0,searches:s,multiSelect:!0,columns:r,url:a,limit:1e4,onSelect:function(i){i.onComplete=function(){for(var i,e="",t=this.getSelection(),r=0;r<t.length;r++){var a=this.get(t[r]);i="id"==d?a.id:a.slug,e+=r==t.length-1?i:i+","}c.val(e)}},onUnselect:function(i){i.onComplete=function(){for(var i,e="",t=this.getSelection(),r=0;r<t.length;r++){var a=this.get(t[r]);i="id"==d?a.id:a.slug,e+=r==t.length-1?i:i+","}c.val(e)}},onLoad:function(t){t.onComplete=function(){if(null!=n&&""!=n){var t=n.split(",");i.each(t,function(t,c){i.each(w2ui[e].records,function(i,t){var r="id"==d?t.id:t.slug;return r==c?(w2ui[e].select(t.recid),!1):!0})})}}}})}function d(e,t,c,d,r,a){var s=c.val();if(t.w2grid({name:e,show:{selectColumn:!0},multiSelect:!0,columns:r,records:a,onSelect:function(i){i.onComplete=function(){for(var i,e="",t=this.getSelection(),r=0;r<t.length;r++){var a=this.get(t[r]);i="id"==d?a.id:a.slug,e+=r==t.length-1?i:i+","}c.val(e)}},onUnselect:function(i){i.onComplete=function(){for(var i,e="",t=this.getSelection(),r=0;r<t.length;r++){var a=this.get(t[r]);i="id"==d?a.id:a.slug,e+=r==t.length-1?i:i+","}c.val(e)}}}),null!=s&&""!=s){var n=s.split(",");i.each(n,function(t,c){i.each(a,function(i,t){var r="id"==d?t.id:t.slug;return r==c?(w2ui[e].select(t.recid),!1):!0})})}}var r,a,s,n=(i("#editor_mode").val(),i("#title")),o=i("#rc-vt0"),l=i("#rc-vt2"),h=i("#x_id"),u=i("#rc-xid"),v=i("#ad_cats"),g=i("#rc-ac"),b=i("#acw"),k=i("#x_cats"),_=i("#rc-xc"),w=i("#ad_custom_tax_terms"),m=i("#rc-ctt"),p=i("#cttw"),f=i("#x_ad_custom_tax_terms"),x=i("#rc-xct"),y=i("#ad_authors"),O=i("#rc-au"),I=i("#aaw"),j=i("#x_authors"),S=i("#rc-xa"),T=i("#ad_tags"),U=i("#rc-at"),M=i("#atw"),A=i("#x_tags"),E=i("#rc-xt"),R=i("#ad_custom"),D=i("#rc-cu"),C=i("#cuw"),P=i("#x_custom"),q=i("#rc-xu"),B=i("#x-view-users"),F=i("#custom-users"),L=i("#rc-cmf"),N=i("#rc-cmt"),G=i("#ad_users_reg"),z=i("#x-reg-users"),H=i("#x_ad_users"),J=(i("#upload-file-button"),i("#uploading"),i("#uploading-help"),i("#load_img"),i("#ctt-grid")),Q=i("#view_custom_tax_terms"),W=i("#x-ctt-grid"),K=i("#x_view_custom_tax_terms"),V=i("#posts-grid"),X=i("#view_id"),Y=i("#users-grid"),Z=i("#x_view_users"),$=i("#x-posts-grid"),ie=i("#x_view_id"),ee=i("#cats-grid"),te=i("#view_cats"),ce=i("#x-cats-grid"),de=i("#x_view_cats"),re=i("#auth-grid"),ae=i("#view_authors"),se=i("#x-auth-grid"),ne=i("#x_view_authors"),oe=i("#tags-grid"),le=i("#view_tags"),he=i("#x-tags-grid"),ue=i("#x_view_tags"),ve=i("#cust-grid"),ge=i("#view_custom"),be=i("#x-cust-grid"),ke=i("#x_view_custom"),_e=samEditorOptions.samAjaxUrl,we=samEditorOptions.samStatsUrl,me=samEditorOptions.models,pe=samEditorOptions.searches,fe=samEditorOptions.data,xe=samEditorOptions.strings,ye=encodeURI(xe.posts),Oe=encodeURI(xe.page),Ie=i("#item_id").val(),je=0,Se=[],Te={animate:!0,animateReplot:!0,cursor:{showTooltip:!1},series:[{pointLabels:{show:!0},renderer:i.jqplot.BarRenderer,showHighlight:!1,rendererOptions:{animation:{speed:2500},barWidth:15,barPadding:-15,barMargin:0,highlightMouseOver:!1},label:xe.labels.hits},{label:xe.labels.clicks,rendererOptions:{animation:{speed:2e3}}}],axesDefaults:{pad:0},axes:{xaxis:{tickInterval:1,drawMajorGridlines:!1,drawMinorGridlines:!0,drawMajorTickMarks:!1,rendererOptions:{tickInset:1,minorTicks:1},min:1},yaxis:{rendererOptions:{forceTickAt0:!0}}},highlighter:{show:!0,showLabel:!0,tooltipAxes:"y",sizeAdjust:7.5,tooltipLocation:"ne",useAxesFormatters:!1,tooltipFormatString:xe.labels.clicks+": %d"},legend:{show:!0,placement:"ne"}};n.tooltip({track:!0}),i("#image_tools").tabs(),e.init(),a=i.post(we,{action:"load_item_stats",id:Ie,sm:je}).done(function(e){"new"!=c&&(i("#total_hits").text(e.total.hits),i("#total_clicks").text(e.total.clicks),i("#total_ctr").text(e.total.ctr),Se=[e.hits,e.clicks],s=i.jqplot("graph",Se,Te))}),i("#adv_nick").combogrid({url:_e+"?action=load_combo_data",datatype:"json",munit:"px",alternate:!0,colModel:me.comboGrid,select:function(e,t){return i("#adv_nick").val(t.item.slug),i("#adv_name").val(t.item.title),i("#adv_mail").val(t.item.email),!1}}),i("#add-file-button").click(function(){var e=xe.url+i("select#files_list option:selected").val();return i("#ad_img").val(e),!1}),d("ctt-grid",J,Q,"slug",me.customTaxes,fe.cTax),d("x-ctt-grid",W,K,"slug",me.customTaxes,fe.cTax),d("cust-grid",ve,ge,"slug",me.customs,fe.customs),d("x-cust-grid",be,ke,"slug",me.customs,fe.customs);var Ue=_e+"?action=load_posts&cstr="+samEditorOptions.data.custList+"&sp="+ye+"&spg="+Oe+"&limit=10000";t("posts-grid",V,X,"id",me.posts,Ue,pe.posts),t("x-posts-grid",$,ie,"id",me.posts,Ue,pe.posts),i("#tabs").tabs({activate:function(e,t){var d=t.newPanel[0].id;"tabs-1"==d&&w2ui["posts-grid"]&&V.w2render("posts-grid"),"tabs-2"==d&&(m.is(":visible")&&w2ui["ctt-grid"]&&J.w2render("ctt-grid"),x.is(":visible")&&w2ui["x-ctt-grid"]&&W.w2render("x-ctt-grid"),u.is(":visible")&&w2ui["x-posts-grid"]&&$.w2render("x-posts-grid"),g.is(":visible")&&w2ui["cats-grid"]&&ee.w2render("cats-grid"),_.is(":visible")&&w2ui["x-cats-grid"]&&ce.w2render("x-cats-grid"),O.is(":visible")&&w2ui["auth-grid"]&&re.w2render("auth-grid"),S.is(":visible")&&w2ui["x-auth-grid"]&&se.w2render("x-auth-grid"),U.is(":visible")&&w2ui["tags-grid"]&&oe.w2render("tags-grid"),E.is(":visible")&&w2ui["x-tags-grid"]&&he.w2render("x-tags-grid"),D.is(":visible")&&w2ui["cust-grid"]&&ve.w2render("cust-grid"),q.is(":visible")&&w2ui["xcust-grid"]&&be.w2render("x-cust-grid")),"tabs-3"==d&&B.is(":visible")&&w2ui["users-grid"]&&Y.w2render("users-grid"),"tabs-5"==d&&s&&"new"!=c&&(s.destroy(),s=i.jqplot("graph",Se,Te))}}),i(window).resize(function(){s&&"new"!=c&&(s.destroy(),s=i.jqplot("graph",Se,Te))}),i("#code_mode_false").click(function(){L.show("blind",{direction:"vertical"},500),N.hide("blind",{direction:"vertical"},500)}),i("#code_mode_true").click(function(){L.hide("blind",{direction:"vertical"},500),N.show("blind",{direction:"vertical"},500)}),2==i("input:radio[name=view_type]:checked").val()&&(h.is(":checked")&&(h.attr("checked",!1),u.hide("blind",{direction:"vertical"},500)),h.attr("disabled",!0)),i("input:radio[name=view_type]").click(function(){var e=i("input:radio[name=view_type]:checked").val();switch(e){case"0":o.is(":hidden")&&o.show("blind",{direction:"vertical"},500),l.is(":visible")&&l.hide("blind",{direction:"vertical"},500),h.attr("disabled",!1);break;case"1":o.is(":visible")&&o.hide("blind",{direction:"vertical"},500),l.is(":visible")&&l.hide("blind",{direction:"vertical"},500),h.attr("disabled",!1);break;case"2":o.is(":visible")&&o.hide("blind",{direction:"vertical"},500),l.is(":hidden")&&(l.show("blind",{direction:"vertical"},500,function(){w2ui["posts-grid"]&&V.w2render("posts-grid")}),h.is(":checked")&&(h.attr("checked",!1),u.hide("blind",{direction:"vertical"},500))),h.attr("disabled",!0)}});var Me,Ae=i.ajax({url:_e,data:{action:"load_authors"},type:"POST"});Ae.done(function(i){Me=i,d("auth-grid",re,ae,"slug",me.authors,Me),d("x-auth-grid",se,ne,"slug",me.authors,Me)});var Ee,Re=i.ajax({url:_e,data:{action:"load_users",subscriber:encodeURI(xe.subscriber),contributor:encodeURI(xe.contributor),author:encodeURI(xe.author),editor:encodeURI(xe.editor),admin:encodeURI(xe.admin),sadmin:encodeURI(xe.superAdmin)},type:"POST"});Re.done(function(i){Ee=i,d("users-grid",Y,Z,"slug",me.users,Ee)});var De,Ce=i.ajax({url:_e,data:{action:"load_cats"},type:"POST"});Ce.done(function(i){De=i,d("cats-grid",ee,te,"slug",me.cats,De),d("x-cats-grid",ce,de,"slug",me.cats,De)});var Pe,qe=i.ajax({url:_e,data:{action:"load_tags"},type:"POST"});qe.done(function(i){Pe=i,d("tags-grid",oe,le,"slug",me.tags,Pe),d("x-tags-grid",he,ue,"slug",me.tags,Pe)}),h.click(function(){h.is(":checked")?2==i("input:radio[name=view_type]:checked").val()?h.attr("checked",!1):u.show("blind",{direction:"vertical"},500,function(){w2ui["x-posts-grid"]&&$.w2render("x-posts-grid")}):u.hide("blind",{direction:"vertical"},500)}),i("input:radio[name=ad_users]").click(function(){var e=i("input:radio[name=ad_users]:checked").val();"0"==e?F.is(":visible")&&F.hide("blind",{direction:"vertical"},500):F.is(":hidden")&&F.show("blind",{direction:"vertical"},500,function(){B.is(":visible")&&w2ui["users-grid"]&&Y.w2render("users-grid")})}),G.click(function(){G.is(":checked")?z.show("blind",{direction:"vertical"},500,function(){B.is(":visible")&&w2ui["users-grid"]&&Y.w2render("users-grid")}):z.hide("blind",{direction:"vertical"},500)}),H.click(function(){H.is(":checked")?B.show("blind",{direction:"vertical"},500,function(){w2ui["users-grid"]&&Y.w2render("users-grid")}):B.hide("blind",{direction:"vertical"},500)}),i("#ad_swf").click(function(){i("#ad_swf").is(":checked")?i("#swf-params").show("blind",{direction:"vertical"},500):i("#swf-params").hide("blind",{direction:"vertical"},500)}),v.is(":checked")&&k.is(":checked")&&(k.attr("checked",!1),_.hide("blind",{direction:"vertical"},500)),v.click(function(){v.is(":checked")?(g.show("blind",{direction:"vertical"},500,function(){w2ui["cats-grid"]&&ee.w2render("cats-grid")}),b.show("blind",{direction:"vertical"},500),k.is(":checked")&&(k.attr("checked",!1),_.hide("blind",{direction:"vertical"},500))):(g.hide("blind",{direction:"vertical"},500),b.hide("blind",{direction:"vertical"},500))}),k.click(function(){k.is(":checked")?(_.show("blind",{direction:"vertical"},500,function(){w2ui["x-cats-grid"]&&ce.w2render("x-cats-grid")}),v.is(":checked")&&(v.attr("checked",!1),g.hide("blind",{direction:"vertical"},500),b.hide("blind",{direction:"vertical"},500))):_.hide("blind",{direction:"vertical"},500)}),w.is(":checked")&&f.is(":checked")&&(f.attr("checked",!1),x.hide("blind",{direction:"vertical"},500)),w.click(function(){w.is(":checked")?(m.show("blind",{direction:"vertical"},500,function(){w2ui["ctt-grid"]&&J.w2render("ctt-grid")}),p.show("blind",{direction:"vertical"},500),f.is(":checked")&&(f.attr("checked",!1),x.hide("blind",{direction:"vertical"},500))):(m.hide("blind",{direction:"vertical"},500),p.hide("blind",{direction:"vertical"},500))}),f.click(function(){f.is(":checked")?(x.show("blind",{direction:"vertical"},500,function(){w2ui["x-ctt-grid"]&&W.w2render("x-ctt-grid")}),w.is(":checked")&&(w.attr("checked",!1),m.hide("blind",{direction:"vertical"},500),p.hide("blind",{direction:"vertical"},500))):x.hide("blind",{direction:"vertical"},500)}),y.is(":checked")&&j.is(":checked")&&(j.attr("checked",!1),S.hide("blind",{direction:"vertical"},500)),y.click(function(){y.is(":checked")?(O.show("blind",{direction:"vertical"},500,function(){w2ui["auth-grid"]&&re.w2render("auth-grid")}),I.show("blind",{direction:"vertical"},500),j.is(":checked")&&(j.attr("checked",!1),S.hide("blind",{direction:"vertical"},500))):(O.hide("blind",{direction:"vertical"},500),I.hide("blind",{direction:"vertical"},500))}),j.click(function(){j.is(":checked")?(S.show("blind",{direction:"vertical"},500,function(){w2ui["x-auth-grid"]&&se.w2render("x-auth-grid")}),y.is(":checked")&&(y.attr("checked",!1),O.hide("blind",{direction:"vertical"},500),I.hide("blind",{direction:"vertical"},500))):S.hide("blind",{direction:"vertical"},500)}),T.is(":checked")&&A.is(":checked")&&(A.attr("checked",!1),E.hide("blind",{direction:"vertical"},500)),T.click(function(){T.is(":checked")?(U.show("blind",{direction:"vertical"},500,function(){w2ui["tags-grid"]&&oe.w2render("tags-grid")}),M.show("blind",{direction:"vertical"},500),A.is(":checked")&&(A.attr("checked",!1),E.hide("blind",{direction:"vertical"},500))):(U.hide("blind",{direction:"vertical"},500),M.hide("blind",{direction:"vertical"},500))}),A.click(function(){A.is(":checked")?(E.show("blind",{direction:"vertical"},500,function(){w2ui["x-tags-grid"]&&he.w2render("x-tags-grid")}),T.is(":checked")&&(T.attr("checked",!1),U.hide("blind",{direction:"vertical"},500),M.hide("blind",{direction:"vertical"},500))):E.hide("blind",{direction:"vertical"},500)}),R.is(":checked")&&P.is(":checked")&&(P.attr("checked",!1),q.hide("blind",{direction:"vertical"},500)),R.click(function(){R.is(":checked")?(D.show("blind",{direction:"vertical"},500,function(){w2ui["cust-grid"]&&ve.w2render("cust-grid")}),C.show("blind",{direction:"vertical"},500),P.is(":checked")&&(P.attr("checked",!1),q.hide("blind",{direction:"vertical"},500))):(D.hide("blind",{direction:"vertical"},500),C.hide("blind",{direction:"vertical"},500))}),P.click(function(){P.is(":checked")?(q.show("blind",{direction:"vertical"},500,function(){w2ui["x-cust-grid"]&&be.w2render("x-cust-grid")}),R.is(":checked")&&(R.attr("checked",!1),D.hide("blind",{direction:"vertical"},500),C.hide("blind",{direction:"vertical"},500))):q.hide("blind",{direction:"vertical"},500)}),i("#ad_start_date, #ad_end_date").datepicker({dateFormat:"yy-mm-dd",showButtonPanel:!0}),i("#ad_schedule").click(function(){i("#ad_schedule").is(":checked")?i("#rc-sc").show("blind",{direction:"vertical"},500):i("#rc-sc").hide("blind",{direction:"vertical"},500)}),i("#limit_hits").click(function(){i("#limit_hits").is(":checked")?i("#rc-hl").show("blind",{direction:"vertical"},500):i("#rc-hl").hide("blind",{direction:"vertical"},500)}),i("#limit_clicks").click(function(){i("#limit_clicks").is(":checked")?i("#rc-cl").show("blind",{direction:"vertical"},500):i("#rc-cl").hide("blind",{direction:"vertical"},500)}),r=samEditorOptions.ads,r.pointer="ads",(r.enabled||""==n.val())&&n.pointer({content:"<h3>"+r.title+"</h3><p>"+r.content+"</p>",position:"top",close:function(){i.ajax({url:ajaxurl,data:{action:"close_sam_pointer",pointer:r.pointer},async:!0})}}).pointer("open");var Be=i("#is_singular"),Fe=i("#is_single"),Le=i("#is_page"),Ne=i("#is_attachment"),Ge=i("#is_posttype");Be.click(function(){Be.is(":checked")&&i("#is_single, #is_page, #is_attachment, #is_posttype").attr("checked",!0)}),i("#is_single, #is_page, #is_attachment, #is_posttype").click(function(){!Be.is(":checked")||Fe.is(":checked")&&Le.is(":checked")&&Ne.is(":checked")&&Ge.is(":checked")?!Be.is(":checked")&&Fe.is(":checked")&&Ge.is(":checked")&&Le.is(":checked")&&Ne.is(":checked")&&Be.attr("checked",!0):Be.attr("checked",!1)});var ze=i("#is_archive"),He=i("#is_tax"),Je=i("#is_category"),Qe=i("#is_tag"),We=i("#is_author"),Ke=i("#is_date"),Ve=i("#is_posttype_archive"),Xe=i("#is_tax, #is_category, #is_tag, #is_author, #is_date, #is_posttype_archive");return ze.click(function(){ze.is(":checked")&&Xe.attr("checked",!0)}),Xe.click(function(){!ze.is(":checked")||He.is(":checked")&&Je.is(":checked")&&Ve.is(":checked")&&Qe.is(":checked")&&We.is(":checked")&&Ke.is(":checked")?!ze.is(":checked")&&He.is(":checked")&&Je.is(":checked")&&Ve.is(":checked")&&Qe.is(":checked")&&We.is(":checked")&&Ke.is(":checked")&&ze.attr("checked",!0):ze.attr("checked",!1)}),i("#stats_month").change(function(){je=i(this).val(),i.post(we,{action:"load_item_stats",id:Ie,sm:je}).done(function(e){i("#total_hits").text(e.total.hits),i("#total_clicks").text(e.total.clicks),i("#total_ctr").text(e.total.ctr),Se=[e.hits,e.clicks],s&&"new"!=c&&(s.destroy(),s=i.jqplot("graph",Se,Te))})}),!1})}(jQuery);