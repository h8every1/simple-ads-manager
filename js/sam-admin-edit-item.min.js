var sam=sam||{};!function(i){var e,t=samEditorOptions.media,c=(samEditorOptions.strings,samEditorOptions.action);sam.media=e={buttonId:"#banner-media",adUrl:"#ad_img",adImgId:"#ad_img_id",adName:"#title",adDesc:"#item_description",adAlt:"#ad_alt",adTarget:"#ad_target",fbBtnId:"#fallback-code",adFallback:"#ad_swf_fallback",init:function(){i(this.buttonId).on("click",this.openMediaDialog),i(this.fbBtnId).on("click",this.openMediaDialog)},openMediaDialog:function(i){i.preventDefault();var c="#"+i.currentTarget.id;return this._frame?void this._frame.open():(this._frame=e.frame=wp.media({title:t.title,button:{text:t.button},multiple:!1,library:{type:"image, *flash*"}}),this._frame.on("ready",function(){}),this._frame.state("library").on("select",function(){var i=this.get("selection").single();e.handleMediaAttachment(i,c)}),void this._frame.open())},handleMediaAttachment:function(e,t){var c=e.toJSON();if(t==this.buttonId)i(this.adUrl).val(c.url),i(this.adImgId).val(c.id),""==i(this.adName).val()&&""!=c.title&&i(this.adName).val(c.title),""==i(this.adDesc).val()&&""!=c.caption&&i(this.adDesc).val(c.caption),""==i(this.adAlt).val()&&""!=c.alt&&i(this.adAlt).val(c.alt);else if(t==this.fbBtnId){var d=i(this.adTarget).val(),r=""!=d?'<a href="'+d+'">':"",a='<img src="'+c.url+'">',s=""!=d?"</a>":"",n=r+a+s;i(this.adFallback).val(n)}}},i(document).ready(function(){function t(e,t,c,d,r,a,s){var n=c.val();t.w2grid({name:e,show:{selectColumn:!0,toolbar:!0,footer:!0},multiSearch:!0,searches:s,multiSelect:!0,columns:r,url:a,limit:1e4,onSelect:function(i){i.onComplete=function(){for(var i,e="",t=this.getSelection(),r=0;r<t.length;r++){var a=this.get(t[r]);i="id"==d?a.id:a.slug,e+=r==t.length-1?i:i+","}c.val(e)}},onUnselect:function(i){i.onComplete=function(){for(var i,e="",t=this.getSelection(),r=0;r<t.length;r++){var a=this.get(t[r]);i="id"==d?a.id:a.slug,e+=r==t.length-1?i:i+","}c.val(e)}},onLoad:function(t){t.onComplete=function(){if(null!=n&&""!=n){var t=n.split(",");i.each(t,function(t,c){i.each(w2ui[e].records,function(i,t){var r="id"==d?t.id:t.slug;return r==c?(w2ui[e].select(t.recid),!1):!0})})}}}})}function d(e,t,c,d,r,a){var s=c.val();if(t.w2grid({name:e,show:{selectColumn:!0},multiSelect:!0,columns:r,records:a,onSelect:function(i){i.onComplete=function(){for(var i,e="",t=this.getSelection(),r=0;r<t.length;r++){var a=this.get(t[r]);i="id"==d?a.id:a.slug,e+=r==t.length-1?i:i+","}c.val(e)}},onUnselect:function(i){i.onComplete=function(){for(var i,e="",t=this.getSelection(),r=0;r<t.length;r++){var a=this.get(t[r]);i="id"==d?a.id:a.slug,e+=r==t.length-1?i:i+","}c.val(e)}}}),null!=s&&""!=s){var n=s.split(",");i.each(n,function(t,c){i.each(a,function(i,t){var r="id"==d?t.id:t.slug;return r==c?(w2ui[e].select(t.recid),!1):!0})})}}var r,a,s,n=(i("#editor_mode").val(),i("#title")),o=i("#rc-vt0"),l=i("#rc-vt2"),h=i("#x_id"),u=i("#rc-xid"),g=i("#ad_cats"),v=i("#rc-ac"),b=i("#acw"),k=i("#x_cats"),w=i("#rc-xc"),_=i("#ad_custom_tax_terms"),m=i("#rc-ctt"),p=i("#cttw"),f=i("#x_ad_custom_tax_terms"),x=i("#rc-xct"),y=i("#ad_authors"),I=i("#rc-au"),O=i("#aaw"),j=i("#x_authors"),S=i("#rc-xa"),T=i("#ad_tags"),U=i("#rc-at"),M=i("#atw"),E=i("#x_tags"),R=i("#rc-xt"),D=i("#ad_custom"),A=i("#rc-cu"),C=i("#cuw"),P=i("#x_custom"),q=i("#rc-xu"),B=i("#x-view-users"),L=i("#custom-users"),N=i("#rc-cmf"),F=i("#rc-cmt"),G=i("#ad_users_reg"),z=i("#x-reg-users"),H=i("#x_ad_users"),J=(i("#upload-file-button"),i("#uploading"),i("#uploading-help"),i("#load_img"),i("#ctt-grid")),Q=i("#view_custom_tax_terms"),W=i("#x-ctt-grid"),Z=i("#x_view_custom_tax_terms"),K=i("#posts-grid"),V=i("#view_id"),X=i("#users-grid"),Y=i("#x_view_users"),$=i("#x-posts-grid"),ie=i("#x_view_id"),ee=i("#cats-grid"),te=i("#view_cats"),ce=i("#x-cats-grid"),de=i("#x_view_cats"),re=i("#auth-grid"),ae=i("#view_authors"),se=i("#x-auth-grid"),ne=i("#x_view_authors"),oe=i("#tags-grid"),le=i("#view_tags"),he=i("#x-tags-grid"),ue=i("#x_view_tags"),ge=i("#cust-grid"),ve=i("#view_custom"),be=i("#x-cust-grid"),ke=i("#x_view_custom"),we=samEditorOptions.samAjaxUrl,_e=samEditorOptions.samStatsUrl,me=samEditorOptions.models,pe=samEditorOptions.searches,fe=samEditorOptions.data,xe=samEditorOptions.strings,ye=encodeURI(xe.posts),Ie=encodeURI(xe.page),Oe=i("#item_id").val(),je=0,Se=[],Te={animate:!1,animateReplot:!0,cursor:{showTooltip:!1},seriesDefaults:{pointLabels:{show:!0,xpadding:12,ypadding:-5,hideZeros:!0,formatString:"%d"}},series:[{pointLabels:{location:"ne"},renderer:i.jqplot.BarRenderer,showHighlight:!1,rendererOptions:{barWidth:15,barPadding:-15,barMargin:0,highlightMouseOver:!1},label:xe.labels.hits},{label:xe.labels.clicks,yaxis:"y2axis",pointLabels:{location:"nw"}}],axesDefaults:{pad:1.2,min:0},axes:{xaxis:{tickInterval:1,drawMajorGridlines:!1,drawMinorGridlines:!0,drawMajorTickMarks:!1,rendererOptions:{tickInset:1,minorTicks:1},pad:1,min:1},y2axis:{rendererOptions:{alignTicks:!0}}},legend:{show:!0,placement:"ne"}};n.tooltip({track:!0}),i("#image_tools").tabs(),e.init(),a=i.post(_e,{action:"load_item_stats",id:Oe,sm:je}).done(function(e){"new"!=c&&(i("#total_hits").text(e.total.hits),i("#total_clicks").text(e.total.clicks),Se=[e.hits,e.clicks],s=i.jqplot("graph",Se,Te))}),i("#adv_nick").combogrid({url:we+"?action=load_combo_data",datatype:"json",munit:"px",alternate:!0,colModel:me.comboGrid,select:function(e,t){return i("#adv_nick").val(t.item.slug),i("#adv_name").val(t.item.title),i("#adv_mail").val(t.item.email),!1}}),i("#add-file-button").click(function(){var e=xe.url+i("select#files_list option:selected").val();return i("#ad_img").val(e),!1}),d("ctt-grid",J,Q,"slug",me.customTaxes,fe.cTax),d("x-ctt-grid",W,Z,"slug",me.customTaxes,fe.cTax),d("cust-grid",ge,ve,"slug",me.customs,fe.customs),d("x-cust-grid",be,ke,"slug",me.customs,fe.customs);var Ue=we+"?action=load_posts&cstr="+samEditorOptions.data.custList+"&sp="+ye+"&spg="+Ie+"&limit=10000";t("posts-grid",K,V,"id",me.posts,Ue,pe.posts),t("x-posts-grid",$,ie,"id",me.posts,Ue,pe.posts),i("#tabs").tabs({activate:function(e,t){var d=t.newPanel[0].id;"tabs-1"==d&&w2ui["posts-grid"]&&K.w2render("posts-grid"),"tabs-2"==d&&(m.is(":visible")&&w2ui["ctt-grid"]&&J.w2render("ctt-grid"),x.is(":visible")&&w2ui["x-ctt-grid"]&&W.w2render("x-ctt-grid"),u.is(":visible")&&w2ui["x-posts-grid"]&&$.w2render("x-posts-grid"),v.is(":visible")&&w2ui["cats-grid"]&&ee.w2render("cats-grid"),w.is(":visible")&&w2ui["x-cats-grid"]&&ce.w2render("x-cats-grid"),I.is(":visible")&&w2ui["auth-grid"]&&re.w2render("auth-grid"),S.is(":visible")&&w2ui["x-auth-grid"]&&se.w2render("x-auth-grid"),U.is(":visible")&&w2ui["tags-grid"]&&oe.w2render("tags-grid"),R.is(":visible")&&w2ui["x-tags-grid"]&&he.w2render("x-tags-grid"),A.is(":visible")&&w2ui["cust-grid"]&&ge.w2render("cust-grid"),q.is(":visible")&&w2ui["xcust-grid"]&&be.w2render("x-cust-grid")),"tabs-3"==d&&B.is(":visible")&&w2ui["users-grid"]&&X.w2render("users-grid"),"tabs-5"==d&&s&&"new"!=c&&(s.destroy(),s=i.jqplot("graph",Se,Te))}}),i(window).resize(function(){s&&"new"!=c&&(s.destroy(),s=i.jqplot("graph",Se,Te))}),i("#code_mode_false").click(function(){N.show("blind",{direction:"vertical"},500),F.hide("blind",{direction:"vertical"},500)}),i("#code_mode_true").click(function(){N.hide("blind",{direction:"vertical"},500),F.show("blind",{direction:"vertical"},500)}),2==i("input:radio[name=view_type]:checked").val()&&(h.is(":checked")&&(h.attr("checked",!1),u.hide("blind",{direction:"vertical"},500)),h.attr("disabled",!0)),i("input:radio[name=view_type]").click(function(){var e=i("input:radio[name=view_type]:checked").val();switch(e){case"0":o.is(":hidden")&&o.show("blind",{direction:"vertical"},500),l.is(":visible")&&l.hide("blind",{direction:"vertical"},500),h.attr("disabled",!1);break;case"1":o.is(":visible")&&o.hide("blind",{direction:"vertical"},500),l.is(":visible")&&l.hide("blind",{direction:"vertical"},500),h.attr("disabled",!1);break;case"2":o.is(":visible")&&o.hide("blind",{direction:"vertical"},500),l.is(":hidden")&&(l.show("blind",{direction:"vertical"},500,function(){w2ui["posts-grid"]&&K.w2render("posts-grid")}),h.is(":checked")&&(h.attr("checked",!1),u.hide("blind",{direction:"vertical"},500))),h.attr("disabled",!0)}});var Me,Ee=i.ajax({url:we,data:{action:"load_authors"},type:"POST"});Ee.done(function(i){Me=i,d("auth-grid",re,ae,"slug",me.authors,Me),d("x-auth-grid",se,ne,"slug",me.authors,Me)});var Re,De=i.ajax({url:we,data:{action:"load_users",subscriber:encodeURI(xe.subscriber),contributor:encodeURI(xe.contributor),author:encodeURI(xe.author),editor:encodeURI(xe.editor),admin:encodeURI(xe.admin),sadmin:encodeURI(xe.superAdmin)},type:"POST"});De.done(function(i){Re=i,d("users-grid",X,Y,"slug",me.users,Re)});var Ae,Ce=i.ajax({url:we,data:{action:"load_cats"},type:"POST"});Ce.done(function(i){Ae=i,d("cats-grid",ee,te,"slug",me.cats,Ae),d("x-cats-grid",ce,de,"slug",me.cats,Ae)});var Pe,qe=i.ajax({url:we,data:{action:"load_tags"},type:"POST"});qe.done(function(i){Pe=i,d("tags-grid",oe,le,"slug",me.tags,Pe),d("x-tags-grid",he,ue,"slug",me.tags,Pe)}),h.click(function(){h.is(":checked")?2==i("input:radio[name=view_type]:checked").val()?h.attr("checked",!1):u.show("blind",{direction:"vertical"},500,function(){w2ui["x-posts-grid"]&&$.w2render("x-posts-grid")}):u.hide("blind",{direction:"vertical"},500)}),i("input:radio[name=ad_users]").click(function(){var e=i("input:radio[name=ad_users]:checked").val();"0"==e?L.is(":visible")&&L.hide("blind",{direction:"vertical"},500):L.is(":hidden")&&L.show("blind",{direction:"vertical"},500,function(){B.is(":visible")&&w2ui["users-grid"]&&X.w2render("users-grid")})}),G.click(function(){G.is(":checked")?z.show("blind",{direction:"vertical"},500,function(){B.is(":visible")&&w2ui["users-grid"]&&X.w2render("users-grid")}):z.hide("blind",{direction:"vertical"},500)}),H.click(function(){H.is(":checked")?B.show("blind",{direction:"vertical"},500,function(){w2ui["users-grid"]&&X.w2render("users-grid")}):B.hide("blind",{direction:"vertical"},500)}),i("#ad_swf").click(function(){i("#ad_swf").is(":checked")?i("#swf-params").show("blind",{direction:"vertical"},500):i("#swf-params").hide("blind",{direction:"vertical"},500)}),g.is(":checked")&&k.is(":checked")&&(k.attr("checked",!1),w.hide("blind",{direction:"vertical"},500)),g.click(function(){g.is(":checked")?(v.show("blind",{direction:"vertical"},500,function(){w2ui["cats-grid"]&&ee.w2render("cats-grid")}),b.show("blind",{direction:"vertical"},500),k.is(":checked")&&(k.attr("checked",!1),w.hide("blind",{direction:"vertical"},500))):(v.hide("blind",{direction:"vertical"},500),b.hide("blind",{direction:"vertical"},500))}),k.click(function(){k.is(":checked")?(w.show("blind",{direction:"vertical"},500,function(){w2ui["x-cats-grid"]&&ce.w2render("x-cats-grid")}),g.is(":checked")&&(g.attr("checked",!1),v.hide("blind",{direction:"vertical"},500),b.hide("blind",{direction:"vertical"},500))):w.hide("blind",{direction:"vertical"},500)}),_.is(":checked")&&f.is(":checked")&&(f.attr("checked",!1),x.hide("blind",{direction:"vertical"},500)),_.click(function(){_.is(":checked")?(m.show("blind",{direction:"vertical"},500,function(){w2ui["ctt-grid"]&&J.w2render("ctt-grid")}),p.show("blind",{direction:"vertical"},500),f.is(":checked")&&(f.attr("checked",!1),x.hide("blind",{direction:"vertical"},500))):(m.hide("blind",{direction:"vertical"},500),p.hide("blind",{direction:"vertical"},500))}),f.click(function(){f.is(":checked")?(x.show("blind",{direction:"vertical"},500,function(){w2ui["x-ctt-grid"]&&W.w2render("x-ctt-grid")}),_.is(":checked")&&(_.attr("checked",!1),m.hide("blind",{direction:"vertical"},500),p.hide("blind",{direction:"vertical"},500))):x.hide("blind",{direction:"vertical"},500)}),y.is(":checked")&&j.is(":checked")&&(j.attr("checked",!1),S.hide("blind",{direction:"vertical"},500)),y.click(function(){y.is(":checked")?(I.show("blind",{direction:"vertical"},500,function(){w2ui["auth-grid"]&&re.w2render("auth-grid")}),O.show("blind",{direction:"vertical"},500),j.is(":checked")&&(j.attr("checked",!1),S.hide("blind",{direction:"vertical"},500))):(I.hide("blind",{direction:"vertical"},500),O.hide("blind",{direction:"vertical"},500))}),j.click(function(){j.is(":checked")?(S.show("blind",{direction:"vertical"},500,function(){w2ui["x-auth-grid"]&&se.w2render("x-auth-grid")}),y.is(":checked")&&(y.attr("checked",!1),I.hide("blind",{direction:"vertical"},500),O.hide("blind",{direction:"vertical"},500))):S.hide("blind",{direction:"vertical"},500)}),T.is(":checked")&&E.is(":checked")&&(E.attr("checked",!1),R.hide("blind",{direction:"vertical"},500)),T.click(function(){T.is(":checked")?(U.show("blind",{direction:"vertical"},500,function(){w2ui["tags-grid"]&&oe.w2render("tags-grid")}),M.show("blind",{direction:"vertical"},500),E.is(":checked")&&(E.attr("checked",!1),R.hide("blind",{direction:"vertical"},500))):(U.hide("blind",{direction:"vertical"},500),M.hide("blind",{direction:"vertical"},500))}),E.click(function(){E.is(":checked")?(R.show("blind",{direction:"vertical"},500,function(){w2ui["x-tags-grid"]&&he.w2render("x-tags-grid")}),T.is(":checked")&&(T.attr("checked",!1),U.hide("blind",{direction:"vertical"},500),M.hide("blind",{direction:"vertical"},500))):R.hide("blind",{direction:"vertical"},500)}),D.is(":checked")&&P.is(":checked")&&(P.attr("checked",!1),q.hide("blind",{direction:"vertical"},500)),D.click(function(){D.is(":checked")?(A.show("blind",{direction:"vertical"},500,function(){w2ui["cust-grid"]&&ge.w2render("cust-grid")}),C.show("blind",{direction:"vertical"},500),P.is(":checked")&&(P.attr("checked",!1),q.hide("blind",{direction:"vertical"},500))):(A.hide("blind",{direction:"vertical"},500),C.hide("blind",{direction:"vertical"},500))}),P.click(function(){P.is(":checked")?(q.show("blind",{direction:"vertical"},500,function(){w2ui["x-cust-grid"]&&be.w2render("x-cust-grid")}),D.is(":checked")&&(D.attr("checked",!1),A.hide("blind",{direction:"vertical"},500),C.hide("blind",{direction:"vertical"},500))):q.hide("blind",{direction:"vertical"},500)}),i("#ad_start_date, #ad_end_date").datepicker({dateFormat:"yy-mm-dd",showButtonPanel:!0}),i("#ad_schedule").click(function(){i("#ad_schedule").is(":checked")?i("#rc-sc").show("blind",{direction:"vertical"},500):i("#rc-sc").hide("blind",{direction:"vertical"},500)}),i("#limit_hits").click(function(){i("#limit_hits").is(":checked")?i("#rc-hl").show("blind",{direction:"vertical"},500):i("#rc-hl").hide("blind",{direction:"vertical"},500)}),i("#limit_clicks").click(function(){i("#limit_clicks").is(":checked")?i("#rc-cl").show("blind",{direction:"vertical"},500):i("#rc-cl").hide("blind",{direction:"vertical"},500)}),r=samEditorOptions.ads,r.pointer="ads",(r.enabled||""==n.val())&&n.pointer({content:"<h3>"+r.title+"</h3><p>"+r.content+"</p>",position:"top",close:function(){i.ajax({url:ajaxurl,data:{action:"close_sam_pointer",pointer:r.pointer},async:!0})}}).pointer("open");var Be=i("#is_singular"),Le=i("#is_single"),Ne=i("#is_page"),Fe=i("#is_attachment"),Ge=i("#is_posttype");Be.click(function(){Be.is(":checked")&&i("#is_single, #is_page, #is_attachment, #is_posttype").attr("checked",!0)}),i("#is_single, #is_page, #is_attachment, #is_posttype").click(function(){!Be.is(":checked")||Le.is(":checked")&&Ne.is(":checked")&&Fe.is(":checked")&&Ge.is(":checked")?!Be.is(":checked")&&Le.is(":checked")&&Ge.is(":checked")&&Ne.is(":checked")&&Fe.is(":checked")&&Be.attr("checked",!0):Be.attr("checked",!1)});var ze=i("#is_archive"),He=i("#is_tax"),Je=i("#is_category"),Qe=i("#is_tag"),We=i("#is_author"),Ze=i("#is_date"),Ke=i("#is_posttype_archive"),Ve=i("#is_tax, #is_category, #is_tag, #is_author, #is_date, #is_posttype_archive");return ze.click(function(){ze.is(":checked")&&Ve.attr("checked",!0)}),Ve.click(function(){!ze.is(":checked")||He.is(":checked")&&Je.is(":checked")&&Ke.is(":checked")&&Qe.is(":checked")&&We.is(":checked")&&Ze.is(":checked")?!ze.is(":checked")&&He.is(":checked")&&Je.is(":checked")&&Ke.is(":checked")&&Qe.is(":checked")&&We.is(":checked")&&Ze.is(":checked")&&ze.attr("checked",!0):ze.attr("checked",!1)}),i("#stats_month").change(function(){je=i(this).val(),i.post(_e,{action:"load_item_stats",id:Oe,sm:je}).done(function(e){i("#total_hits").text(e.total.hits),i("#total_clicks").text(e.total.clicks),Se=[e.hits,e.clicks],s&&"new"!=c&&(s.destroy(),s=i.jqplot("graph",Se,Te))})}),!1})}(jQuery);