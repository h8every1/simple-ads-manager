var sam=sam||{};!function(t){var i,a=samEditorOptions.media;sam.media=i={buttonId:"#banner-media",adUrl:"#patch_img",adImgId:"#patch_img_id",adName:"#title",adDesc:"#description",init:function(){t(this.buttonId).on("click",this.openMediaDialog)},openMediaDialog:function(t){return t.preventDefault(),this._frame?void this._frame.open():(this._frame=i.frame=wp.media({title:a.title,button:{text:a.button},multiple:!1,library:{type:"image, *flash*"}}),this._frame.on("ready",function(){}),this._frame.state("library").on("select",function(){var t=this.get("selection").single();i.handleMediaAttachment(t)}),void this._frame.open())},handleMediaAttachment:function(i){var a=i.toJSON();t(this.adUrl).val(a.url),t(this.adImgId).val(a.id),""==t(this.adName).val()&&""!=a.title&&t(this.adName).val(a.title),""==t(this.adDesc).val()&&""!=a.caption&&t(this.adDesc).val(a.caption),""==t(this.adAlt).val()&&""!=a.alt&&t(this.adAlt).val(a.alt)}},t(document).ready(function(){var a,e=(t("#editor_mode").val(),t("#rc-psi")),o=t("#rc-psc"),n=t("#rc-psd"),s=t("#title"),l=t("#place_id").val(),r=(t("#upload-file-button"),t("#uploading"),t("#uploading-help"),t("#load_img"),0),d=t("#ads-grid"),c=samEditorOptions.samStatsUrl,p=samEditorOptions.labels;a=samEditorOptions.places,a.pointer="places",i.init(),s.tooltip({track:!0});var h,m=samEditorOptions.options,u=[],v={animate:!1,animateReplot:!0,cursor:{showTooltip:!1},seriesDefaults:{pointLabels:{show:!0,xpadding:10,ypadding:0,hideZeros:!0,formatString:"%d"}},series:[{pointLabels:{location:"ne"},renderer:t.jqplot.BarRenderer,showHighlight:!1,rendererOptions:{barWidth:15,barPadding:-15,barMargin:0,highlightMouseOver:!1},label:p.hits},{label:p.clicks,yaxis:"y2axis",pointLabels:{location:"nw"}}],axesDefaults:{pad:1.2,min:0},axes:{xaxis:{tickInterval:1,drawMajorGridlines:!1,drawMinorGridlines:!0,drawMajorTickMarks:!1,rendererOptions:{tickInset:1,minorTicks:1},pad:1,min:1},y2axis:{rendererOptions:{alignTicks:!0}}},legend:{show:!0,placement:"ne"}};return t.post(c,{action:"load_stats",id:l,sm:r}).done(function(i){u=[i.hits,i.clicks],t("#total_hits").text(i.total.hits),t("#total_clicks").text(i.total.clicks),t("#total_ctr").text(i.total.ctr),h=t.jqplot("graph",u,v)}),t("#tabs").tabs({activate:function(i,a){var e=a.newPanel[0].id;"tabs-3"==e&&h&&(h.destroy(),h=t.jqplot("graph",u,v))}}),t(window).resize(function(){h&&(h.destroy(),h=t.jqplot("graph",u,v))}),t("#image_tools").tabs(),t.post(c,{action:"load_ads",id:l,sm:0}).done(function(t){var i=t.records;d.w2grid({name:"ads",show:{selectColumn:!1},multiSelect:!1,columns:samEditorOptions.columns,records:i})}),t("#add-file-button").click(function(){var i=m.url+t("select#files_list option:selected").val();return t("#patch_img").val(i),!1}),t("#patch_source_image").click(function(){e.is(":hidden")&&e.show("blind",{direction:"vertical"},500),o.is(":visible")&&o.hide("blind",{direction:"vertical"},500),n.is(":visible")&&n.hide("blind",{direction:"vertical"},500)}),t("#patch_source_code").click(function(){e.is(":visible")&&e.hide("blind",{direction:"vertical"},500),o.is(":hidden")&&o.show("blind",{direction:"vertical"},500),n.is(":visible")&&n.hide("blind",{direction:"vertical"},500)}),t("#patch_source_dfp").click(function(){e.is(":visible")&&e.hide("blind",{direction:"vertical"},500),o.is(":visible")&&o.hide("blind",{direction:"vertical"},500),n.is(":hidden")&&n.show("blind",{direction:"vertical"},500)}),(a.enabled||""==s.val())&&s.pointer({content:"<h3>"+a.title+"</h3><p>"+a.content+"</p>",position:"top",close:function(){t.ajax({url:ajaxurl,data:{action:"close_sam_pointer",pointer:a.pointer},async:!0})}}).pointer("open"),t("#stats_month").change(function(){r=t(this).val(),t.post(c,{action:"load_stats",id:l,sm:r}).done(function(i){u=[i.hits,i.clicks],t("#total_hits").text(i.total.hits),t("#total_clicks").text(i.total.clicks),t("#total_ctr").text(i.total.ctr),h&&(h.destroy(),h=t.jqplot("graph",u,v))})}),!1})}(jQuery);